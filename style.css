/* ===== BASE ===== */

*{
  box-sizing:border-box;
}

body{
  margin:0;
  background:#07020f;
  color:white;

  font-family:
    system-ui,
    -apple-system,
    "Segoe UI Emoji",
    "Apple Color Emoji",
    "Noto Color Emoji",
    sans-serif;
}


/* ===== STAGE LAYOUT ===== */

.stage{
  width:100%;

  /* key fix for phone */
  min-height:100vh;
  height:auto;

  display:flex;
  flex-direction:column;
  align-items:center;

  /* start from top so gallery never clips */
  justify-content:flex-start;

  padding:10px 0 60px 0;

  position:relative;
  overflow-y:auto;
}

.hidden{
  display:none !important;
}


/* ===== GALLERY FIXED ===== */

#gallery{
  display:flex;
  gap:8px;

  overflow-x:auto;
  overflow-y:hidden;

  width:100%;
  max-width:100%;

  padding:10px 6px;

  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
}

#gallery img{
  scroll-snap-align:center;

  width:148px;        /* safe phone width */
  flex-shrink:0;

  border-radius:14px;

  opacity:0;
  transform:translateY(30px);
  transition:1.2s;
}


/* ===== STORY TEXT ===== */

#lines{
  margin-top:16px;
  font-size:18px;

  text-align:center;
  max-width:92%;

  /* not fixed height anymore */
  min-height:60px;
}


/* ===== CARD BASE ===== */

.card{
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(10px);

  padding:22px;
  border-radius:20px;

  text-align:center;
  max-width:90%;
  width:360px;
}


/* ===== BUTTONS ===== */

.btns{
  margin-top:16px;
}

button{
  padding:14px 30px;
  margin:8px;

  border:none;
  border-radius:30px;

  font-size:18px;
}

#yes{
  background:#ff206e;
  color:white;
}

#no{
  background:#111;
  color:white;
}


/* ===== CANVAS LAYERS ===== */

#starsLayer,
#fireLayer{
  position:absolute;
  top:0;
  left:0;

  width:100%;
  height:100%;
}

#fireLayer{
  pointer-events:none;
}


/* ===== MAGIC ELEMENTS ===== */

#gift{
  font-size:80px;

  position:absolute;
  top:40%;

  cursor:pointer;
  animation:float 2s infinite;
}

#ring{
  font-size:70px;

  position:absolute;
  top:35%;

  transform:scale(0);
  transition:1.2s;

  text-align:center;
}

.forever{
  font-size:18px;
  letter-spacing:2px;
}


/* ===== MISS MINE TEXT ===== */

#nameStars{
  position:absolute;
  top:18%;

  width:100%;
  text-align:center;

  font-size:48px;
  letter-spacing:8px;

  opacity:0;
  z-index:10;

  transition:2s;
  text-shadow:0 0 12px pink;
}


/* ===== TRANSPARENT FINAL CARD ===== */

#letter{
  position:relative;

  background:rgba(0,0,0,0.25);      /* glass */
  backdrop-filter:blur(6px);

  border:1px solid rgba(255,255,255,0.18);

  z-index:12;

  margin-top:40px;
}


/* let fireworks breathe behind it */
#stage-magic .card{
  pointer-events:auto;
}


/* ===== SOFT FOREVER EFFECT ===== */

.soft{
  opacity:0.85;
  animation:pulse 3s infinite;
}

@keyframes pulse{
  0%{ opacity:0.7; }
  50%{ opacity:1; }
  100%{ opacity:0.7; }
}


/* ===== FLOAT ANIM ===== */

@keyframes float{
  0%{ transform:translateY(-4px); }
  50%{ transform:translateY(4px); }
  100%{ transform:translateY(-4px); }
}

